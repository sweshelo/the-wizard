# TASK-2.2: 戦略プロンプトの洗練

## ステータス: COMPLETED

## 開始日時: 2026-01-29

## 担当エージェント: Claude

## 概要

より詳細な戦略指示をプロンプトに含め、AI判断の質を向上

## 成果物

- `/src/ai/prompts/strategy.ts` - 色別戦略プロンプト
- `/src/ai/prompts/analysis.ts` - 状況別分析プロンプト

## 実装済みテストケース

### Strategy Prompts (17テスト)

- [x] 赤の色名取得
- [x] 黄の色名取得
- [x] 青の色名取得
- [x] 緑の色名取得
- [x] 紫の色名取得
- [x] 不正な色で「不明」を返す
- [x] 赤の戦略情報取得
- [x] 黄の戦略情報取得
- [x] 青の戦略情報取得
- [x] 緑の戦略情報取得
- [x] 紫の戦略情報取得
- [x] 不正な色でnullを返す
- [x] 5色全ての戦略マップが存在
- [x] 各戦略に必須フィールドが含まれる
- [x] 単色デッキ戦略フォーマット
- [x] 2色デッキ戦略フォーマット
- [x] 不正なメインカラーの処理

### Analysis Prompts (18テスト)

- [x] 序盤（ターン1-3）の判定
- [x] 中盤（ターン4-7）の判定
- [x] 終盤（ターン8+）の判定
- [x] フェーズ別アドバイス生成
- [x] 盤面有利の検出
- [x] 盤面不利の検出
- [x] 盤面互角の検出
- [x] BP差の計算
- [x] ライフアドバンテージ分析
- [x] 手札差分析
- [x] 低手札警告
- [x] 低ライフ警告
- [x] 序盤のアドバイス生成
- [x] 負けている時の防御的アドバイス
- [x] 勝っている時の攻撃的アドバイス
- [x] 完全な分析のフォーマット
- [x] マークダウン構造

## テスト結果

- 35テストパス
- 88 expect() calls

## 課題・ブロッカー

なし

## 完了日時: 2026-01-29
